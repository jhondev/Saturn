<html class="js csstransforms3d">
  <head>
    <meta charSet="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>
      Saturn | Router
    </title>
    <link rel="icon" type="image/png" sizes="32x32" href="https://saturnframework.org//static/images/favicon.png"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/nucleus.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/fontawesome-all.min.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/hybrid.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/featherlight.min.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/perfect-scrollbar.min.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/auto-complete.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/atom-one-dark-reasonable.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/theme.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/atom-one-dark.min.css"/>
    <link rel="stylesheet" href="https://saturnframework.org//static/css/theme-blue.css"/>
    <script src="https://saturnframework.org//static/js/jquery-3.3.1.min.js"></script>
  </head>
  <body>
    <nav id="sidebar">
      <div id="header-wrapper">
        <div id="header">
          <h2 id="logo">
            Saturn
          </h2>
        </div>
        <div class="searchbox">
          <label for="search-by">
            <i class="fas fa-search"></i>
          </label>
          <input data-search-input="" id="search-by" type="search" placeholder="Search..."/>
          <span data-search-clear="">
            <i class="fas fa-times"></i>
          </span>
        </div>
        <script type="text/javascript" src="https://saturnframework.org//static/js/lunr.min.js"></script>
        <script type="text/javascript" src="https://saturnframework.org//static/js/auto-complete.js"></script>
        <script type="text/javascript">
          var baseurl ='https://saturnframework.org/'
        </script>
        <script type="text/javascript" src="https://saturnframework.org//static/js/search.js"></script>
        <script src="https://saturnframework.org//static/js/highlight.pack.js"></script>
        <script>
          hljs.initHighlightingOnLoad();
        </script>
      </div>
      <div class="highlightable">
        <ul class="topics">
          <li id="menu-explanations" class="dd-item menu-group-link menu-group-link-active">
            <a>
              Explanation
            </a>
          </li>
          <li id="menu-tutorials" class="dd-item menu-group-link">
            <a>
              Tutorials
            </a>
          </li>
          <li id="menu-refs" class="dd-item menu-group-link">
            <a>
              API References
            </a>
          </li>
        </ul>
        <ul id="submenu-explanations" class="submenu submenu-active">
          <li>
            <a href="https://saturnframework.org//explanations/overview.html" class="padding">
              Saturn Overview
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//explanations/directory-structure.html" class="padding">
              Directory Structure
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//explanations/scaffolding.html" class="padding">
              Scaffolding
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//explanations/pipeline.html" class="padding">
              Pipeline
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//explanations/routing.html" class="active-link padding">
              Router
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//explanations/view.html" class="padding">
              View Engine
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//explanations/controller.html" class="padding">
              Controllers
            </a>
          </li>
        </ul>
        <ul id="submenu-tutorials" class="submenu">
          <li>
            <a href="https://saturnframework.org//tutorials/how-to-start.html" class="padding">
              Getting started
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//tutorials/adding-saturn-to-an-existing-giraffe-app.html" class="padding">
              Getting started
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//tutorials/adding-pages.html" class="padding">
              Adding Pages
            </a>
          </li>
        </ul>
        <ul id="submenu-refs" class="submenu">
          <li>
            <a href="https://saturnframework.org//reference/Saturn/index.html" class="padding">
              Saturn
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//reference/Saturn.AzureFunctions/index.html" class="padding">
              Saturn.AzureFunctions
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//reference/Saturn.Extensions.Authorization/index.html" class="padding">
              Saturn.Extensions.Authorization
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//reference/Saturn.Extensions.gRPC/index.html" class="padding">
              Saturn.Extensions.gRPC
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//reference/Saturn.Extensions.HttpSys/index.html" class="padding">
              Saturn.Extensions.HttpSys
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//reference/Saturn.Extensions.OpenIdConnect/index.html" class="padding">
              Saturn.Extensions.OpenIdConnect
            </a>
          </li>
          <li>
            <a href="https://saturnframework.org//reference/Saturn.Extensions.Turbolinks/index.html" class="padding">
              Saturn.Extensions.Turbolinks
            </a>
          </li>
        </ul>
        <section id="shortcuts">
          <h3>
            Shortucts
          </h3>
          <ul>
            <li>
              <a class="padding" href="/">
                <i class="fas fa-home"></i>
                Home
              </a>
            </li>
            <li>
              <a class="padding" href="https://safe-stack.github.io/">
                <i class="fas fa-cubes"></i>
                SAFE Stack
              </a>
            </li>
            <li>
              <a class="padding" href="https://github.com/SaturnFramework/Saturn">
                <i class="fab fa-github"></i>
                GitHub repo
              </a>
            </li>
            <li>
              <a class="padding" href="/license.html">
                <i class="far fa-file-alt"></i>
                License
              </a>
            </li>
          </ul>
        </section>
        <section id="footer">
          <p>Built with <a href="https://github.com/ionide/Fornax">Fornax</a>
        </section>
      </div>
    </nav>
    <section id="body">
      <div id="overlay"></div>
      <div class="padding highlightable">
        <div id="body-inner">
          <span id="sidebar-toggle-span">
            <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
              <i class="fas fa-bars"></i>
               navigation
            </a>
          </span>
          <h1>Routing</h1>
<p>Routes are how Saturn connects all the HTTP requests to the different actions. Think of a route as the URL of the application. The site is yoursite.com but you may have a route for your about page such as yoursite.com/about.</p>
<p>In Saturn, <code>Routers</code> contain all the routes of your application. A router is a list of routes. A website can have a router that handles the different routes to your page like so:</p>
<pre><code>yoursite.com
    ├── &quot;/&quot;             -yoursite.com/
    ├── &quot;/about&quot;        -yoursite.com/about
    ├── &quot;/contact&quot;      -yoursite.com/contact
    ├── &quot;/news&quot;         -yoursite.com/news
    └── &quot;/investors&quot;    -yoursite.com/investors
</code></pre>
<p>Since this is at the root, this is your router at <code>&quot;&quot;</code> path. You can then add a router inside another router to have the following:</p>
<pre><code>yoursite.com
    ├── books           -yoursite.com/books
    |   ├── list        -yoursite.com/books/list
    |   ├── add         -yoursite.com/books/add
    |   ├── update      -yoursite.com/books/update
    |   └── delete      -yoursite.com/books/update
    ├── about           -yoursite.com/about
    ├── contact         -yoursite.com/contact
    ├── news            -yoursite.com/news
    └── investors       -yoursite.com/investors
</code></pre>
<p>Now you have a router for the <code>&quot;/books&quot;</code> path inside another router for the <code>&quot;&quot;</code> path.</p>
<p>Now to see it in code, create a Saturn project from the template and you will have a <code>Router.fs</code> file like this:</p>
<pre><code class="language-fsharp">module Router

open Saturn
open Giraffe.Core
open Giraffe.ResponseWriters


let browser = pipeline {
    plug acceptHtml
    plug putSecureBrowserHeaders
    plug fetchSession
    set_header &quot;x-pipeline-type&quot; &quot;Browser&quot;
}

let defaultView = router {
    get &quot;/&quot; (htmlView Index.layout)
    get &quot;/index.html&quot; (redirectTo false &quot;/&quot;)
    get &quot;/default.html&quot; (redirectTo false &quot;/&quot;)
}

let browserRouter = router {
    not_found_handler (htmlView NotFound.layout) //Use the default 404 webpage
    pipe_through browser //Use the default browser pipeline

    forward &quot;&quot; defaultView //Use the default view
}

//Other scopes may use different pipelines and error handlers

// let api = pipeline {
//     plug acceptJson
//     set_header &quot;x-pipeline-type&quot; &quot;Api&quot;
// }

// let apiRouter = router {
//     not_found_handler (setStatusCode 404 &gt;=&gt; text &quot;Api 404&quot;)
//     pipe_through api
//
//     forward &quot;/someApi&quot; someScopeOrController
// }

let appRouter = router {
    // forward &quot;/api&quot; apiRouter
    forward &quot;&quot; browserRouter
}
</code></pre>
<p>First, take a look at the <code>router</code> function.</p>
<pre><code class="language-fsharp">let appRouter = router {
    forward &quot;&quot; browserRouter
}
</code></pre>
<p>The <code>appRouter</code> value is a <code>router</code>. Inside is the <code>forward &quot;&quot; browserRouter</code> line. The <code>forward</code> function needs a path and a router. In this case, the path is an empty string and the router is <code>browserRouter</code>. That means that the <code>browserRouter</code> router will handle the routes at the current location. Since <code>appRouter</code> is the first router called, the current location is the root of the application.</p>
<p>Now let's look at <code>browserRouter</code>:</p>
<pre><code class="language-fsharp">let browserRouter = router {
    not_found_handler (htmlView NotFound.layout)
    pipe_through browser

    forward &quot;&quot; defaultView
}
</code></pre>
<p>There are three lines. The first line, <code>not_found_handler (htmlView NotFound.layout)</code> tells <code>browserRouter</code> to display a not found page if the user enters a route that the application does not handle. The second line tells the application to use the <code>browser</code> pipeline defined above. The pipeline is a list of settings on how the website will deliver the pages. Lastly, <code>forward &quot;&quot; defaultView</code> is like <code>forward &quot;&quot; browserRouter</code> from the <code>appRouter</code>. Again, <code>browserRouter</code> does not contain any routes but it tells the <code>defaultView</code> router to handle them. Finally, we get to the part where the application is told how to handle the routes. Inside <code>defaultView</code>, we created 3 routes:</p>
<pre><code class="language-fsharp">let defaultView = router {
    get &quot;/&quot; (htmlView Index.layout)
    get &quot;/index.html&quot; (redirectTo false &quot;/&quot;)
    get &quot;/default.html&quot; (redirectTo false &quot;/&quot;)
}
</code></pre>
<p>Here, we see that <code>get</code> is used to define the routes. There are 3 routes here but 2 of them redirect to the first route. To illustrate, the routes are:</p>
<pre><code>yoursite.com
    └── &quot;&quot; (router)
        └── &quot;&quot; (browserRouter)
            └── &quot;&quot; (defaultView)
                ├── &quot;/&quot;                 -yoursite.com/
                ├── &quot;/index.html&quot;       -redirect to yoursite.com/
                └── &quot;/default.html&quot;     -redirect to yoursite.com/
</code></pre>
<p>Looking at the first line inside <code>defaultView</code>, <code>get &quot;/&quot; (htmlView Index.layout)</code> tells the application to display <code>Index.layout</code> at the root of the application. The <code>get</code> corresponds to the HTTP verb GET so when you type in a link, the browser tries to GET the page. The first parameter of <code>get</code> is &quot;/&quot;, so basically when getting the root, the <code>get</code> function will return something. The second parameter is <code>(htmlView Index.layout)</code> so the <code>get</code> function returns an HTML page specified by Index.layout. The second and third line have <code>(redirectTo false &quot;/&quot;)</code>, telling the application to go to &quot;yoursite.com/&quot; when going to &quot;yoursite.com/index&quot; or &quot;yoursite.com/default&quot;</p>
<h2>Best Practices</h2>
<p>You can combine all 3 routers into one router like so:</p>
<pre><code class="language-fsharp">let appRouter = router {
    not_found_handler (htmlView NotFound.layout)
    pipe_through browser

    get &quot;/&quot; (htmlView Index.layout)
    get &quot;/index.html&quot; (redirectTo false &quot;/&quot;)
    get &quot;/default.html&quot; (redirectTo false &quot;/&quot;)
}
</code></pre>
<p>The template splits them into 3 to encourage good practices. In the first router, you can see the commented out code <code>forward &quot;/api&quot; apiRouter</code>. This is a good suggestion in the template to have a separate router to handle your API routes. We set up how to deliever the webpage with <code>pipe_through browser</code> in <code>browserRouter</code>. The settings are important for a browser to know how to handle your routes but not for a different application to access your routes as an API.</p>
<p>The template provides an example of how to set up the API routes in the commented out code, which I copied below:</p>
<pre><code class="language-fsharp">let api = pipeline {
    plug acceptJson
    set_header &quot;x-pipeline-type&quot; &quot;Api&quot;
}

let apiRouter = router {
    not_found_handler (setStatusCode 404 &gt;=&gt; text &quot;Api 404&quot;)
    pipe_through api

    forward &quot;/someApi&quot; someScopeOrController
}

</code></pre>
<p>Here we have the <code>apiRouter</code> router which does not return a 404 page but a 404 text instead which is appropriate for an API. The router also uses a pipeline that is more appropriate for an API such as accepting JSON inputs instead of HTML as in the <code>browser</code> pipeline.</p>
<h2>Format Strings</h2>
<p>You might be wondering how to make routes that accept a numerical ID. You can make multiple routes for each ID like so</p>
<pre><code>get &quot;/1&quot; (getApplication 1)
get &quot;/2&quot; (getApplication 2)
get &quot;/3&quot; (getApplication 3)
...
</code></pre>
<p>But this is impracticle because there can be a large number of items or new items are constantly being created with new IDs. Instead the solution is to use format strings. Remember that in the <a href="adding-pages.md">Adding Pages Guide</a>, we used <code>getf &quot;/%s&quot; index2Action</code> to pass a string to page.</p>
<table>
<thead>
<tr>
<th>Format Char</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%b</code></td>
<td><code>bool</code></td>
</tr>
<tr>
<td><code>%c</code></td>
<td><code>char</code></td>
</tr>
<tr>
<td><code>%s</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>%i</code></td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>%d</code></td>
<td><code>int64</code></td>
</tr>
<tr>
<td><code>%f</code></td>
<td><code>float</code>/<code>double</code></td>
</tr>
<tr>
<td><code>%O</code></td>
<td><code>Guid</code></td>
</tr>
</tbody>
</table>
<p>For a numerical ID, we want to pass an int which is <code>%i</code> in the list above, so you can replace the lines above with</p>
<pre><code class="language-fsharp">getf &quot;/%i&quot; getApplication
</code></pre>
<p>Notice that <code>getf</code> is used instead of get. This is a separate version of get that handles <code>f</code>ormat characters.</p>
<pre><code>You can use format strings with &quot;forward&quot; too by using &quot;forwardf&quot;
</code></pre>
<h2>API Reference</h2>
<p>Full API reference for <code>router</code> CE can be found <a href="../reference/Saturn/saturn-router-routerbuilder.html">here</a></p>

        </div>
      </div>
    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="https://saturnframework.org//static/js/clipboard.min.js"></script>
    <script src="https://saturnframework.org//static/js/perfect-scrollbar.min.js"></script>
    <script src="https://saturnframework.org//static/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="https://saturnframework.org//static/js/jquery.sticky.js"></script>
    <script src="https://saturnframework.org//static/js/featherlight.min.js"></script>
    <script src="https://saturnframework.org//static/js/modernizr.custom-3.6.0.js"></script>
    <script src="https://saturnframework.org//static/js/learn.js"></script>
    <script src="https://saturnframework.org//static/js/hugo-learn.js"></script>
    <link rel="stylesheet" href="https://saturnframework.org//static/mermaid/mermaid.css"/>
    <script src="https://saturnframework.org//static/mermaid/mermaid.js"></script>
    <script>
      mermaid.initialize({ startOnLoad: true });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/languages/fsharp.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad()
    </script>
  </body>
</html>